{"ast":null,"code":"import _regeneratorRuntime from\"C:/Users/akshun chauhan/Downloads/crud-application-using-mern-stack-react-js-nodejs-express-js-and-mongodb/crud-app/client/node_modules/@babel/runtime/helpers/esm/regeneratorRuntime.js\";import _asyncToGenerator from\"C:/Users/akshun chauhan/Downloads/crud-application-using-mern-stack-react-js-nodejs-express-js-and-mongodb/crud-app/client/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";import _slicedToArray from\"C:/Users/akshun chauhan/Downloads/crud-application-using-mern-stack-react-js-nodejs-express-js-and-mongodb/crud-app/client/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import React,{useEffect,useState}from'react';import axios from\"axios\";import toast from\"react-hot-toast\";import\"./user.css\";import{Link}from'react-router-dom';import DeleteConfirmation from'../deleteuser/DeleteConfirmation';// Import the DeleteConfirmation component\nimport{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var User=function User(){var _useState=useState([]),_useState2=_slicedToArray(_useState,2),users=_useState2[0],setUsers=_useState2[1];var _useState3=useState(null),_useState4=_slicedToArray(_useState3,2),deleteUserId=_useState4[0],setDeleteUserId=_useState4[1];var _useState5=useState(false),_useState6=_slicedToArray(_useState5,2),showConfirmation=_useState6[0],setShowConfirmation=_useState6[1];useEffect(function(){var fetchData=/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee(){var response;return _regeneratorRuntime().wrap(function _callee$(_context){while(1)switch(_context.prev=_context.next){case 0:_context.next=2;return axios.get(\"http://localhost:8000/api/getall\");case 2:response=_context.sent;setUsers(response.data);case 4:case\"end\":return _context.stop();}},_callee);}));return function fetchData(){return _ref.apply(this,arguments);};}();fetchData();},[]);var deleteUser=function deleteUser(userId){setDeleteUserId(userId);setShowConfirmation(true);};var handleDeleteConfirm=/*#__PURE__*/function(){var _ref2=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee2(){return _regeneratorRuntime().wrap(function _callee2$(_context2){while(1)switch(_context2.prev=_context2.next){case 0:_context2.prev=0;_context2.next=3;return axios.delete(\"http://localhost:8000/api/delete/\".concat(deleteUserId));case 3:setUsers(function(prevUsers){return prevUsers.filter(function(user){return user._id!==deleteUserId;});});toast.success(\"User deleted successfully\",{position:'top-right'});_context2.next=11;break;case 7:_context2.prev=7;_context2.t0=_context2[\"catch\"](0);console.log(_context2.t0);toast.error(\"Error deleting user\",{position:'top-right'});case 11:setShowConfirmation(false);setDeleteUserId(null);case 13:case\"end\":return _context2.stop();}},_callee2,null,[[0,7]]);}));return function handleDeleteConfirm(){return _ref2.apply(this,arguments);};}();return/*#__PURE__*/_jsxs(\"div\",{className:\"userTable\",children:[/*#__PURE__*/_jsx(\"h1\",{children:\"Contact Manager\"}),/*#__PURE__*/_jsx(\"br\",{}),/*#__PURE__*/_jsx(Link,{to:\"/add\",className:\"addButton\",children:\"Add User\"}),/*#__PURE__*/_jsxs(\"table\",{border:1,cellPadding:10,cellSpacing:0,children:[/*#__PURE__*/_jsx(\"thead\",{children:/*#__PURE__*/_jsxs(\"tr\",{children:[/*#__PURE__*/_jsx(\"th\",{children:\"S.No.\"}),/*#__PURE__*/_jsx(\"th\",{children:\"First name\"}),/*#__PURE__*/_jsx(\"th\",{children:\"Last name\"}),/*#__PURE__*/_jsx(\"th\",{children:\"Phone number\"}),/*#__PURE__*/_jsx(\"th\",{children:\"User Email\"}),/*#__PURE__*/_jsx(\"th\",{children:\"Category\"}),/*#__PURE__*/_jsx(\"th\",{children:\"Actions\"})]})}),/*#__PURE__*/_jsx(\"tbody\",{children:users.map(function(user,index){return/*#__PURE__*/_jsxs(\"tr\",{children:[/*#__PURE__*/_jsx(\"td\",{children:index+1}),/*#__PURE__*/_jsxs(\"td\",{children:[/*#__PURE__*/_jsx(Link,{to:\"/user/\".concat(user._id),children:user.fname}),\" \"]}),/*#__PURE__*/_jsx(\"td\",{children:user.lname}),/*#__PURE__*/_jsx(\"td\",{children:user.phone}),/*#__PURE__*/_jsx(\"td\",{children:user.email}),/*#__PURE__*/_jsx(\"td\",{children:user.catagory}),/*#__PURE__*/_jsxs(\"td\",{className:\"actionButtons\",children:[/*#__PURE__*/_jsx(\"button\",{onClick:function onClick(){return deleteUser(user._id);},children:/*#__PURE__*/_jsx(\"i\",{className:\"fa-solid fa-trash\"})}),/*#__PURE__*/_jsx(Link,{to:\"/edit/\".concat(user._id),children:/*#__PURE__*/_jsx(\"i\",{className:\"fa-solid fa-pen-to-square\"})})]})]},user._id);})})]}),showConfirmation&&/*#__PURE__*/_jsx(DeleteConfirmation,{onCancel:function onCancel(){return setShowConfirmation(false);},onConfirm:handleDeleteConfirm})]});};export default User;","map":{"version":3,"names":["React","useEffect","useState","axios","toast","Link","DeleteConfirmation","jsx","_jsx","jsxs","_jsxs","User","_useState","_useState2","_slicedToArray","users","setUsers","_useState3","_useState4","deleteUserId","setDeleteUserId","_useState5","_useState6","showConfirmation","setShowConfirmation","fetchData","_ref","_asyncToGenerator","_regeneratorRuntime","mark","_callee","response","wrap","_callee$","_context","prev","next","get","sent","data","stop","apply","arguments","deleteUser","userId","handleDeleteConfirm","_ref2","_callee2","_callee2$","_context2","delete","concat","prevUsers","filter","user","_id","success","position","t0","console","log","error","className","children","to","border","cellPadding","cellSpacing","map","index","fname","lname","phone","email","catagory","onClick","onCancel","onConfirm"],"sources":["C:/Users/akshun chauhan/Downloads/crud-application-using-mern-stack-react-js-nodejs-express-js-and-mongodb/crud-app/client/src/components/getuser/User.jsx"],"sourcesContent":["import React, { useEffect, useState } from 'react';\r\nimport axios from \"axios\";\r\nimport toast from \"react-hot-toast\";\r\nimport \"./user.css\";\r\nimport { Link } from 'react-router-dom';\r\nimport DeleteConfirmation from '../deleteuser/DeleteConfirmation'; // Import the DeleteConfirmation component\r\n\r\nconst User = () => {\r\n  const [users, setUsers] = useState([]);\r\n  const [deleteUserId, setDeleteUserId] = useState(null);\r\n  const [showConfirmation, setShowConfirmation] = useState(false);\r\n\r\n  useEffect(() => {\r\n    const fetchData = async () => {\r\n      const response = await axios.get(\"http://localhost:8000/api/getall\");\r\n      setUsers(response.data);\r\n    };\r\n    fetchData();\r\n  }, []);\r\n\r\n  const deleteUser = (userId) => {\r\n    setDeleteUserId(userId);\r\n    setShowConfirmation(true);\r\n  };\r\n\r\n  const handleDeleteConfirm = async () => {\r\n    try {\r\n      await axios.delete(`http://localhost:8000/api/delete/${deleteUserId}`);\r\n      setUsers((prevUsers) => prevUsers.filter((user) => user._id !== deleteUserId));\r\n      toast.success(\"User deleted successfully\", { position: 'top-right' });\r\n    } catch (error) {\r\n      console.log(error);\r\n      toast.error(\"Error deleting user\", { position: 'top-right' });\r\n    }\r\n    setShowConfirmation(false);\r\n    setDeleteUserId(null);\r\n  };\r\n\r\n  return (\r\n    <div className='userTable'>\r\n      <h1>Contact Manager</h1>\r\n      <br />\r\n      <Link to={\"/add\"} className='addButton'>Add User</Link>\r\n      <table border={1} cellPadding={10} cellSpacing={0}>\r\n        <thead>\r\n          <tr>\r\n            <th>S.No.</th>\r\n            <th>First name</th>\r\n            <th>Last name</th>\r\n            <th>Phone number</th>\r\n            <th>User Email</th>\r\n            <th>Category</th>\r\n            <th>Actions</th>\r\n          </tr>\r\n        </thead>\r\n        <tbody>\r\n          {users.map((user, index) => (\r\n            <tr key={user._id}>\r\n              <td>{index + 1}</td>\r\n              <td>\r\n                <Link to={`/user/${user._id}`}>{user.fname}</Link> {/* Make the first name clickable */}\r\n              </td>\r\n              <td>{user.lname}</td>\r\n              <td>{user.phone}</td>\r\n              <td>{user.email}</td>\r\n              <td>{user.catagory}</td>\r\n              <td className='actionButtons'>\r\n                <button onClick={() => deleteUser(user._id)}><i className=\"fa-solid fa-trash\"></i></button>\r\n                <Link to={`/edit/${user._id}`}><i className=\"fa-solid fa-pen-to-square\"></i></Link>\r\n              </td>\r\n            </tr>\r\n          ))}\r\n        </tbody>\r\n      </table>\r\n      {showConfirmation && (\r\n        <DeleteConfirmation\r\n          onCancel={() => setShowConfirmation(false)}\r\n          onConfirm={handleDeleteConfirm}\r\n        />\r\n      )}\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default User;\r\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}